{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4 py-16 max-w-4xl">
    <!-- Error Icon and Message -->
    <div class="text-center mb-12">
        <!-- Wilted plant icon representing something went wrong -->
        <div class="text-6xl mb-6">ü•Ä</div>
        <h1 class="text-5xl font-bold text-garden-text-primary mb-4">500</h1>
        <h2 class="text-2xl font-semibold text-garden-text-secondary mb-4">
            The garden needs some tending
        </h2>
        <p class="text-lg text-garden-text-muted max-w-2xl mx-auto">
            Something unexpected happened while processing your request. 
            The gardener has been notified and is working on fixing this issue.
        </p>
    </div>

    <!-- Status Message -->
    <div class="bg-garden-surface rounded-lg p-6 border border-garden-border mb-8">
        <div class="flex items-start space-x-3">
            <span class="text-2xl">‚ö†Ô∏è</span>
            <div>
                <h3 class="text-xl font-semibold mb-2 text-garden-text-primary">
                    What happened?
                </h3>
                <p class="text-garden-text-muted mb-4">
                    The server encountered an internal error and was unable to complete your request. 
                    This is typically temporary and should be resolved soon.
                </p>
                <p class="text-sm text-garden-text-muted">
                    Error ID: <span class="font-mono">{{ error_id or 'Unknown' }}</span><br>
                    Timestamp: <span class="font-mono">{{ timestamp or 'Unknown' }}</span>
                </p>
            </div>
        </div>
    </div>

    <!-- What You Can Do -->
    <div class="grid md:grid-cols-2 gap-8 mb-12">
        <!-- Try Again -->
        <div class="bg-garden-surface rounded-lg p-6 border border-garden-border">
            <h3 class="text-xl font-semibold mb-4 text-garden-text-primary">
                Try These Options
            </h3>
            <ul class="space-y-3">
                <li class="flex items-start space-x-2">
                    <span>üîÑ</span>
                    <div>
                        <a href="javascript:location.reload()" 
                           class="text-garden-accent hover:text-garden-accent-hover transition-colors">
                            Refresh the page
                        </a>
                        <p class="text-sm text-garden-text-muted">Sometimes a simple refresh helps</p>
                    </div>
                </li>
                <li class="flex items-start space-x-2">
                    <span>‚è∞</span>
                    <div>
                        <span class="text-garden-text-primary">Wait a moment</span>
                        <p class="text-sm text-garden-text-muted">The issue might resolve itself shortly</p>
                    </div>
                </li>
                <li class="flex items-start space-x-2">
                    <span>üè†</span>
                    <div>
                        <a href="/" 
                           class="text-garden-accent hover:text-garden-accent-hover transition-colors">
                            Return home
                        </a>
                        <p class="text-sm text-garden-text-muted">Start fresh from the homepage</p>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Safe Navigation -->
        <div class="bg-garden-surface rounded-lg p-6 border border-garden-border">
            <h3 class="text-xl font-semibold mb-4 text-garden-text-primary">
                Safe Paths
            </h3>
            <p class="text-garden-text-muted mb-4">
                These pages should still be accessible:
            </p>
            <ul class="space-y-2">
                <li>
                    <a href="/" class="text-garden-accent hover:text-garden-accent-hover transition-colors">
                        üè° Home
                    </a>
                </li>
                <li>
                    <a href="/garden" class="text-garden-accent hover:text-garden-accent-hover transition-colors">
                        üåø Garden Overview
                    </a>
                </li>
                <li>
                    <a href="/topics" class="text-garden-accent hover:text-garden-accent-hover transition-colors">
                        üè∑Ô∏è Browse Topics
                    </a>
                </li>
                <li>
                    <a href="/projects" class="text-garden-accent hover:text-garden-accent-hover transition-colors">
                        üöÄ Projects
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Contact Option -->
    <div class="bg-garden-surface rounded-lg p-6 border border-garden-border text-center">
        <p class="text-garden-text-secondary mb-4">
            If this problem persists, please let me know:
        </p>
        <div class="flex justify-center gap-4">
            <a href="https://github.com/{{ github_username or 'yourusername' }}/digital_garden/issues" 
               target="_blank"
               rel="noopener noreferrer"
               class="inline-block px-6 py-3 bg-garden-accent text-white rounded-lg hover:bg-garden-accent-hover transition-colors">
                üìù Report Issue on GitHub
            </a>
            <a href="/" 
               class="inline-block px-6 py-3 bg-garden-border text-garden-text-primary rounded-lg hover:bg-garden-surface-hover transition-colors">
                üè† Go Home
            </a>
        </div>
    </div>

    <!-- Technical Details (if in development) -->
    {% if debug_mode %}
    <div class="mt-8 p-4 bg-garden-surface rounded-lg border border-red-600">
        <h4 class="font-semibold text-red-600 mb-2">Debug Information:</h4>
        <div class="text-sm text-garden-text-muted font-mono space-y-1">
            <p>Path: {{ request.url.path }}</p>
            <p>Method: {{ request.method }}</p>
            {% if error_type %}
            <p>Error Type: {{ error_type }}</p>
            {% endif %}
            {% if error_message %}
            <p>Error Message: {{ error_message }}</p>
            {% endif %}
            {% if traceback %}
            <details class="mt-2">
                <summary class="cursor-pointer text-garden-accent hover:text-garden-accent-hover">
                    Show Traceback
                </summary>
                <pre class="mt-2 p-2 bg-black text-xs overflow-x-auto">{{ traceback }}</pre>
            </details>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}