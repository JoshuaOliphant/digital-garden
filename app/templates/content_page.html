{% extends "base.html" %}
{% from 'macros/layout.html' import page_container, content_layout, content_card_container, prose_content, metadata_badges, tag_list %}
{% from 'macros/garden.html' import growth_indicator %}

{% block content %}
{% call page_container(title=metadata.title) %}
  {% call content_layout() %}
    
    {% call content_card_container() %}
      <!-- Metadata and Status -->
      {{ metadata_badges(metadata) }}
      
      <!-- Tags -->
      {{ tag_list(metadata.tags, content_type) }}
      
      <!-- Main Content -->
      <div class="mt-6">
        {% call prose_content() %}
          {{ content | safe }}
        {% endcall %}
      </div>
    {% endcall %}
    
    <!-- Recent Content Section -->
    {% call content_card_container(bg_class='bg-garden-surface-alt', extra_classes='mt-6') %}
      <h2 class="text-2xl font-semibold mb-6 text-garden-text-primary font-serif">Recent Content</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {% if recent_how_tos.content %}
        <div>
          <h3 class="text-lg font-semibold mb-3 text-garden-text-primary">Recent How-to's</h3>
          <ul class="space-y-2">
            {% for how_to in recent_how_tos.content[:5] %}
            <li>
              <a href="/how_to/{{ how_to.name }}"
                 class="text-garden-accent hover:text-garden-accent hover:underline transition-colors"
                 hx-get="/how_to/{{ how_to.name }}"
                 hx-target="#content-area"
                 hx-swap="innerHTML"
                 hx-push-url="true">
                {{ how_to.title }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
        
        {% if recent_notes.content %}
        <div>
          <h3 class="text-lg font-semibold mb-3 text-garden-text-primary">Recent Notes</h3>
          <ul class="space-y-2">
            {% for note in recent_notes.content[:5] %}
            <li>
              <a href="/notes/{{ note.name }}"
                 class="text-garden-accent hover:text-garden-accent hover:underline transition-colors"
                 hx-get="/notes/{{ note.name }}"
                 hx-target="#content-area"
                 hx-swap="innerHTML"
                 hx-push-url="true">
                {{ note.title }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      </div>
    {% endcall %}
    
  {% endcall %}
{% endcall %}
{% endblock %}