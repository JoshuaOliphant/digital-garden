{% extends "base.html" %}

{% block title %}~/notes{% endblock %}
{% block current_path %}/notes{% endblock %}

{% block content %}
<!-- Command Output Header -->
<div class="output-block">
    <div class="output-line">
        <span class="prompt-symbol">$</span> <span style="color: var(--term-green);">ls -la ~/notes</span>
    </div>
    <div class="output-line" style="margin-top: 0.5rem; color: var(--term-gray);">
        total {{ garden_data.total_count }} notes in the garden
    </div>
</div>

<!-- Tags/Topics Bar -->
{% if garden_data.tags %}
<div class="output-block">
    <div class="output-line" style="color: var(--term-gray);">-- Topics --</div>
    <div class="tags" style="margin-top: 0.5rem;">
        {% for tag in garden_data.tags[:12] %}
        <a href="/tags/{{ tag }}" class="tag">{{ tag }}</a>
        {% endfor %}
        {% if garden_data.tags|length > 12 %}
        <a href="/topics" class="tag" style="color: var(--term-gray);">+{{ garden_data.tags|length - 12 }} more</a>
        {% endif %}
    </div>
</div>
{% endif %}

<!-- Notes Listing -->
{% if garden_data.content %}
<ul class="content-list">
    {% for item in garden_data.content %}
    <li class="content-item">
        <span class="content-type">
            {% if item.growth_stage == 'evergreen' %}
            <span class="growth-stage growth-evergreen">[E]</span>
            {% elif item.growth_stage == 'growing' %}
            <span class="growth-stage growth-budding">[G]</span>
            {% elif item.growth_stage == 'budding' %}
            <span class="growth-stage growth-budding">[B]</span>
            {% else %}
            <span class="growth-stage growth-seedling">[S]</span>
            {% endif %}
        </span>
        <span class="content-title">
            <a href="/{{ item.content_type|lower }}/{{ item.slug or item.name }}">{{ item.title }}</a>
        </span>
        <span class="content-date">{{ item.created }}</span>
    </li>
    {% if item.tags %}
    <li class="content-meta">
        <span class="tags">
            {% for tag in item.tags[:4] %}
            <a href="/tags/{{ tag }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </span>
    </li>
    {% endif %}
    {% if item.excerpt %}
    <li class="content-meta" style="color: var(--term-gray); margin-bottom: 0.5rem;">
        {{ item.excerpt[:120] }}{% if item.excerpt|length > 120 %}...{% endif %}
    </li>
    {% endif %}
    {% endfor %}
</ul>
{% else %}
<div class="output-block">
    <div class="output-line" style="color: var(--term-amber);">
        No notes found in the garden.
    </div>
</div>
{% endif %}

<!-- Growth Stage Legend -->
<div class="output-block" style="margin-top: 2rem; color: var(--term-gray); font-size: 0.85rem;">
    <div class="output-line">-- Legend --</div>
    <div class="output-line">
        <span class="growth-stage growth-seedling">[S]</span> Seedling
        <span class="growth-stage growth-budding">[B]</span> Budding
        <span class="growth-stage growth-budding">[G]</span> Growing
        <span class="growth-stage growth-evergreen">[E]</span> Evergreen
    </div>
</div>
{% endblock %}
