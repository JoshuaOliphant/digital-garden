{% extends "base.html" %}

{% block title %}~{% endblock %}
{% block current_path %}/{% endblock %}

{% block content %}
<!-- MOTD (Message of the Day) -->
<div class="motd">
    <div class="motd-welcome">Welcome to Joshua Oliphant's Digital Garden</div>
    <div class="motd-info">A place for growing ideas, collecting learnings, and sharing discoveries.</div>
    <div class="motd-hint">Hint: Use keyboard commands or click navigation links above. Type <span class="cmd-link" data-cmd="help">help</span> for all commands.</div>
</div>

<!-- Command Output: ls -la -->
<div class="output-block">
    <div class="output-line">
        <span class="prompt-symbol">$</span> <span style="color: var(--term-green);">ls -la ~/garden</span>
    </div>
    <div class="output-line" style="margin-top: 0.5rem; color: var(--term-gray);">
        total {{ recent_posts|length if recent_posts else 0 }} items
    </div>
</div>

<!-- Recent Posts as File Listing -->
{% if recent_posts %}
<ul class="content-list">
    {% for post in recent_posts %}
    <li class="content-item">
        <span class="content-type">
            {% if post.content_type == 'notes' %}
            <span style="color: var(--term-cyan);">note</span>
            {% elif post.content_type == 'til' %}
            <span style="color: var(--term-yellow);">til</span>
            {% elif post.content_type == 'bookmarks' %}
            <span style="color: var(--term-magenta);">link</span>
            {% elif post.content_type == 'how_to' %}
            <span style="color: var(--term-amber);">howto</span>
            {% else %}
            <span style="color: var(--term-gray);">{{ post.content_type }}</span>
            {% endif %}
        </span>
        <span class="content-title">
            {% if post.content_type == 'bookmarks' and post.url %}
            <a href="{{ post.url }}" target="_blank" rel="noopener noreferrer">
                {{ post.title }} <span style="color: var(--term-gray);">â†—</span>
            </a>
            {% else %}
            <a href="/{{ post.content_type }}/{{ post.slug }}">{{ post.title }}</a>
            {% endif %}
            {% if post.growth_stage %}
            <span class="growth-stage growth-{{ post.growth_stage|lower }}">
                [{{ post.growth_stage|lower }}]
            </span>
            {% endif %}
        </span>
        <span class="content-date">{{ post.created }}</span>
    </li>
    {% if post.tags %}
    <li class="content-meta">
        <span class="tags">
            {% for tag in post.tags[:4] %}
            <a href="/tags/{{ tag }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </span>
    </li>
    {% endif %}
    {% endfor %}
</ul>

<!-- Pagination -->
{% if pagination and (pagination.has_prev or pagination.has_next) %}
<div class="pagination">
    {% if pagination.has_prev %}
    <a href="/?page={{ pagination.page - 1 }}" class="page-link">[prev]</a>
    {% else %}
    <span class="page-link disabled">[prev]</span>
    {% endif %}

    <span class="page-info">page {{ pagination.page }}/{{ pagination.total_pages }}</span>

    {% if pagination.has_next %}
    <a href="/?page={{ pagination.page + 1 }}" class="page-link">[next]</a>
    {% else %}
    <span class="page-link disabled">[next]</span>
    {% endif %}
</div>
{% endif %}

{% else %}
<!-- Empty State -->
<div class="output-block">
    <div class="output-line" style="color: var(--term-amber);">
        No content found. The garden is empty.
    </div>
    <div class="output-line" style="color: var(--term-gray);">
        Start planting seeds by creating content in app/content/
    </div>
</div>
{% endif %}

<!-- Quick Navigation -->
<div class="output-block" style="margin-top: 2rem;">
    <div class="output-line" style="color: var(--term-gray);">
        -- Quick access --
    </div>
    <div class="dir-listing" style="margin-top: 0.5rem;">
        <a href="/garden" class="dir-item">
            <span class="dir-icon">d</span>
            <span class="dir-name">notes/</span>
        </a>
        <a href="/til" class="dir-item">
            <span class="dir-icon">d</span>
            <span class="dir-name">til/</span>
        </a>
        <a href="/bookmarks" class="dir-item">
            <span class="dir-icon">d</span>
            <span class="dir-name">bookmarks/</span>
        </a>
        <a href="/topics" class="dir-item">
            <span class="dir-icon">d</span>
            <span class="dir-name">tags/</span>
        </a>
        <a href="/wander" class="dir-item">
            <span class="file-icon">x</span>
            <span class="file-name">random</span>
        </a>
    </div>
</div>

<!-- Growth Stage Legend -->
<div class="output-block" style="margin-top: 2rem; color: var(--term-gray); font-size: 0.85rem;">
    <div class="output-line">-- Growth stages --</div>
    <div class="output-line">
        <span class="growth-stage growth-seedling">[seedling]</span> New idea, just planted
    </div>
    <div class="output-line">
        <span class="growth-stage growth-budding">[budding]</span> Growing, needs tending
    </div>
    <div class="output-line">
        <span class="growth-stage growth-evergreen">[evergreen]</span> Mature, well-developed
    </div>
</div>
{% endblock %}
