<!-- Garden Bed Items List (HTMX Partial for Dropdown) -->
<div class="space-y-3">
  {% if expanded %}
    <!-- Show all items when expanded -->
    {% for item in items %}
    <div class="border-l-2 border-emerald-200 dark:border-emerald-700 pl-3 py-1">
      <div class="flex items-start justify-between">
        <div class="flex-1">
          <a href="{{ item.url | default('/' + item.content_type + '/' + item.slug) }}" 
             class="text-sm font-medium text-gray-900 dark:text-gray-100 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors">
            {{ item.title | truncate(50) }}
          </a>
          <div class="flex items-center gap-2 mt-1">
            <span class="text-xs px-1.5 py-0.5 rounded 
                        {% if item.status == 'Evergreen' %}bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400
                        {% elif item.status == 'Growing' %}bg-lime-100 text-lime-700 dark:bg-lime-900/30 dark:text-lime-400
                        {% elif item.status == 'Budding' %}bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400
                        {% else %}bg-stone-100 text-stone-700 dark:bg-stone-900/30 dark:text-stone-400{% endif %}">
              {% if item.status == 'Evergreen' %}ğŸŒ³
              {% elif item.status == 'Growing' %}ğŸª´
              {% elif item.status == 'Budding' %}ğŸŒ¿
              {% else %}ğŸŒ±{% endif %}
              {{ item.status | default('Seedling') }}
            </span>
            <span class="text-xs text-gray-500 dark:text-gray-400">
              {% if item.content_type == 'notes' %}ğŸ“
              {% elif item.content_type == 'how_to' %}ğŸ”§
              {% elif item.content_type == 'til' %}ğŸ’¡
              {% elif item.content_type == 'bookmarks' %}ğŸ”–
              {% endif %}
              {{ item.type_indicator | default(item.content_type | replace('_', ' ') | title) }}
            </span>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <!-- Show limited items when collapsed -->
    {% for item in items[:5] %}
    <div class="border-l-2 border-emerald-200 dark:border-emerald-700 pl-3 py-1">
      <div class="flex items-start justify-between">
        <div class="flex-1">
          <a href="{{ item.url | default('/' + item.content_type + '/' + item.slug) }}" 
             class="text-sm font-medium text-gray-900 dark:text-gray-100 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors">
            {{ item.title | truncate(50) }}
          </a>
          <div class="flex items-center gap-2 mt-1">
            <span class="text-xs px-1.5 py-0.5 rounded 
                        {% if item.status == 'Evergreen' %}bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400
                        {% elif item.status == 'Growing' %}bg-lime-100 text-lime-700 dark:bg-lime-900/30 dark:text-lime-400
                        {% elif item.status == 'Budding' %}bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400
                        {% else %}bg-stone-100 text-stone-700 dark:bg-stone-900/30 dark:text-stone-400{% endif %}">
              {% if item.status == 'Evergreen' %}ğŸŒ³
              {% elif item.status == 'Growing' %}ğŸª´
              {% elif item.status == 'Budding' %}ğŸŒ¿
              {% else %}ğŸŒ±{% endif %}
              {{ item.status | default('Seedling') }}
            </span>
            <span class="text-xs text-gray-500 dark:text-gray-400">
              {% if item.content_type == 'notes' %}ğŸ“
              {% elif item.content_type == 'how_to' %}ğŸ”§
              {% elif item.content_type == 'til' %}ğŸ’¡
              {% elif item.content_type == 'bookmarks' %}ğŸ”–
              {% endif %}
              {{ item.type_indicator | default(item.content_type | replace('_', ' ') | title) }}
            </span>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  {% endif %}
</div>

{% if items|length > 5 %}
<div class="mt-4 pt-3 border-t border-gray-200 dark:border-gray-700">
  {% if expanded %}
    <button 
      hx-get="/api/garden-bed/{{ topic }}/items?expanded=false"
      hx-target="#garden-bed-{{ topic }}-items"
      hx-swap="outerHTML"
      class="inline-flex items-center text-sm font-medium text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300 transition-colors"
    >
      Show less
      <svg class="ml-1 w-4 h-4 transform rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </button>
  {% else %}
    <button 
      hx-get="/api/garden-bed/{{ topic }}/items?expanded=true"
      hx-target="#garden-bed-{{ topic }}-items"
      hx-swap="outerHTML"
      class="inline-flex items-center text-sm font-medium text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300 transition-colors"
    >
      View all {{ items|length }} items
      <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </button>
  {% endif %}
</div>
{% endif %}