<!-- Filtered Topics Results (HTMX Partial) -->
<div id="topics-filtered-results">
  {% if total_results == 0 %}
  <div class="text-center py-8">
    <p class="text-gray-500 dark:text-gray-400">No content found matching your filters.</p>
  </div>
  {% else %}
  <div class="mb-4 flex items-center justify-between">
    <p class="text-sm text-gray-600 dark:text-gray-400">
      Found {{ total_results }} item{{ 's' if total_results != 1 else '' }}
      {% if selected_topics %}
        in {{ selected_topics|join(', ') }}
      {% endif %}
      {% if search_query %}
        matching "{{ search_query }}"
      {% endif %}
    </p>
    <button 
      hx-post="/api/topics/filter"
      hx-target="#topics-filtered-results"
      hx-swap="outerHTML"
      hx-vals='{"topics": [], "search": ""}'
      class="text-sm text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300"
    >
      Clear filters
    </button>
  </div>
  
  <div class="space-y-8">
    {% for status, items in grouped_content.items() if items %}
    <div>
      <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center">
        {% if status == 'Evergreen' %}
          <span class="mr-2">ðŸŒ³</span> Evergreen
        {% elif status == 'Growing' %}
          <span class="mr-2">ðŸª´</span> Growing
        {% elif status == 'Budding' %}
          <span class="mr-2">ðŸŒ¿</span> Budding
        {% else %}
          <span class="mr-2">ðŸŒ±</span> Seedling
        {% endif %}
        <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">({{ items|length }})</span>
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for item in items %}
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-all p-4">
          <h4 class="font-medium mb-2">
            <a href="/{{ item.content_type }}/{{ item.slug }}" 
               class="text-gray-900 dark:text-gray-100 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors">
              {{ item.title }}
            </a>
          </h4>
          {% if item.description %}
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">{{ item.description|truncate(100) }}</p>
          {% endif %}
          <div class="flex flex-wrap gap-1">
            {% for tag in item.tags[:3] %}
            <span class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded">{{ tag }}</span>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}
</div>